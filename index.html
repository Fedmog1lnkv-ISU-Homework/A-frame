<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy room with roof</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
    <script src="portals/aframe-portals.js"></script>
</head>

<body>
    <a-scene raycaster-autorefresh>
        <a-assets>
            <img id="sky-image" src="assets/skybox.png">
            <img id="wall" src="assets/wall.jpg">
            <img id="floor" src="assets/floor.jpg">
            <img id="inside_roof" src="assets/inside_roof.jpg">
            <img id="door-texture" src="assets/door.png">
            <a-assets-item id = "craftsman" src="assets/craftsman.glb">
            <a-assets-item id = "bookshelf" src="assets/bookshelf.glb">
            </a-assets-item>
        </a-assets>
        <a-entity environment="fog: 0; dressing: trees; dressingAmount: 100; dressingColor: #90a955; ground: hills; groundTexture: walkernoise; groundColor: #31572c; groundColor2: #132a13; dressingScale: 1; skyType: none"></a-entity>
        <a-sky src="#sky-image" rotation="0 -90 0"></a-sky>

        <!-- Стены комнаты -->
        <a-box position="-1 1.5 -5" width="8" height="3" depth="0.1" src="#wall" side="double"></a-box>

        <!-- Контейнер для двери -->
        <a-entity position="3 1.5 -5" rotation="0 90 0" id="doorWrapper" door-animation>
            <!-- Дверь с анимацией  -->
            <a-box class="door" width="0.1" height="3" depth="2" src="#door-texture" position="0 0 1"></a-box>
        </a-entity>

        <a-box position="0 1.5 10" width="10" height="3" depth="0.1" src="#wall" side="double"></a-box>
        <a-box position="-5 1.5 2.5" width="0.1" height="3" depth="15" src="#wall" side="double"></a-box>
        <a-box position="5 1.5 2.5" width="0.1" height="3" depth="15" src="#wall" side="double"></a-box>

        <!-- Комната -->
        <a-box position="1.5 1.5 5" width="7" height="3" depth="0.1" src="#wall" side="double"></a-box>
        <a-box position="-2 1.5 6.5" width="3" height="3" depth="0.1" rotation="0 90 0" src="#wall" side="double"></a-box>

        <!-- Портал 1 -->
        <a-entity id="portal1" portal="destination: #portal2; maxRecursion: 1" position="4 1.5 6.5" rotation="0 -90 0">
        </a-entity>

        <!-- Портал 2 -->
        <a-entity id="portal2" portal="destination: #portal1" position="-14 1.5 -28" rotation="0 50 0">
        </a-entity>
        
        <!-- Пол -->
        <a-box static-body src="#floor" position="0 0 2.5" rotation="0 0 0" width="10" height="0.2" depth="15"></a-box>
        <!-- Крыша -->
        <!-- Левая часть крыши -->
        <a-triangle static-body vertex-a="-5 3 5" vertex-b="-5 3 -5" vertex-c="0 10 0" material="src: #inside_roof; side: double">
        </a-triangle>

        <!-- Задняя часть крыши -->
        <a-triangle static-body vertex-a="-5 3 5" vertex-b="5 3 5" vertex-c="0 10 0" material="src: #inside_roof; side: double">
        </a-triangle>

        <!-- Передняя часть крыши -->
        <a-triangle static-body vertex-a="-5 3 -5" vertex-b="5 3 -5" vertex-c="0 10 0" material="src: #inside_roof; side: double">
        </a-triangle>

        <!-- Правая часть крыши -->
        <a-triangle static-body vertex-a="5 3 -5" vertex-b="5 3 5" vertex-c="0 10 0" material="src: #inside_roof; side: double">
        </a-triangle>

        <!-- Камера и управление -->
        <a-entity ccamera position="0 1.6 0" look-controls wasd-controls>
            <a-cursor></a-cursor>
        </a-entity>

        <a-plane static-body src="#inside_roof" position="0 3 7.5" rotation="-90 0 0" width="10" height="5" side="double"></a-plane>

        <a-entity
            id="craftsman" visible="true" scale="0.04 0.04 0.04" gltf-model = #craftsman position="3 0.12 3" rotation="0 180 0"></a-entity>
        <a-entity
            id="bookshelf" visible="true" scale="1 1 1" gltf-model = #bookshelf position="-4.5 0.12 -1" rotation="0 -90 0"></a-entity>
        <a-entity
            id="bookshelf" visible="true" scale="1 1 1" gltf-model = #bookshelf position="-4.5 0.12 -2" rotation="0 -90 0"></a-entity>
    </a-scene>
    <script src="script.js"></script>
</body>

</html>